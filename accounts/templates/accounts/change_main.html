{% extends "base.html" %}

{% block content %}
<div class="container py-4" style="max-width: 720px;">
  <h2 class="mb-3">Change Main Character</h2>
  <p class="text-muted">Select which linked character should be treated as your main.</p>

  {% if characters %}
    <form method="post" class="card bg-dark text-light">
      {% csrf_token %}
      <div class="card-body">
        <div class="list-group list-group-flush">
          {% for c in characters %}
            <label class="list-group-item bg-dark text-light d-flex align-items-center justify-content-between">
              <div class="d-flex align-items-center gap-3">
                <img
                  src="https://images.evetech.net/characters/{{ c.character_id }}/portrait?size=64"
                  width="40"
                  height="40"
                  class="rounded"
                  alt="{{ c.character_name }}"
                  loading="lazy"
                />
                <div>
                  <div class="fw-semibold">{{ c.character_name }}</div>
                  <div class="text-muted small">
                    {{ c.corporation_name|default:"Unknown Corp" }}
                    {% if c.alliance_name %} â€¢ {{ c.alliance_name }}{% endif %}
                  </div>
                </div>
              </div>

              <div class="d-flex align-items-center gap-2">
                {% if c.id == current_main_id %}
                  <span class="badge bg-success">Current</span>
                {% endif %}
                <input
                  class="form-check-input"
                  type="radio"
                  name="character_id"
                  value="{{ c.character_id }}"
                  {% if c.id == current_main_id %}checked{% endif %}
                />
              </div>
            </label>
          {% endfor %}
        </div>

        <div class="mt-3 d-flex gap-2">
          <button type="submit" class="btn btn-outline-light">Set Main</button>
          <a href="{% url 'dashboard' %}" class="btn btn-secondary">Cancel</a>
        </div>
      </div>
    </form>
  {% else %}
    <div class="alert alert-secondary">
      No linked characters found. Add a character first.
    </div>
    <a href="{% url 'dashboard' %}" class="btn btn-secondary">Back</a>
  {% endif %}
</div>
{% endblock %}
